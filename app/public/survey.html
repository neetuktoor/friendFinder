<!DOCTYPE html>
  <html>
    <title>Friend Finder</title>

  <!-- Link to the jQuery Library -->
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>

  <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

  <!-- Materialize CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.0/css/materialize.min.css">

  <!-- Materialize JavaScript -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.0/js/materialize.min.js"></script>
          
  <link rel="stylesheet" href="css/style.css">
     </head>

    <body>
  <!-- navigation bar -->   
    <nav>
        <div class="nav-wrapper">
        <div class="brand-logo">FriendFinder  <i class="material-icons">group_add</i></div>
          <ul id="nav-mobile" class="right hide-on-med-and-down">
            <li><a href="/api/friends">API Friends List</a></li>
            <li><a href="https://github.com/neetuktoor/friendFinder">GitHub Repo</a></li>
          </ul>
        </div>
     </nav>

  <!-- Survey -->
<div class="container">
  <h4> Survey Questions </h4>
  <hr>
      <div class="row">
        <div class="col s12 z-depth-5">
        <p> About You </p>
          <div id="surveyQuestions">
          
                  <div class="input-field col s12">
                    <i class="material-icons prefix">account_circle</i>
                    <input id="name" type="text" class="validate">
                    <label for="icon_prefix">Name (Required)</label>
                  </div>

                <div class="input-field col s12">
                  <i class="material-icons prefix">add_a_photo</i>
                  <input id="photo" type="text" class="validate">
                  <label for="icon_photo">Link to Photo Image (Required)</label>
              </div>


                <div class="input-field col s12">
                  <p>Question 1</p>
                  <h5>You find it difficult to introduce yourself to other people.</h5>
                  <select class ="selectChosen" id="q1">
                    <option value="" disabled selected>Select an Option</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                  </select>
                </div>

                <div class="input-field col s12">
                  <p>Question 2</p>
                  <h5>You often get so lost in thoughts that you ignore or forget your surroundings.</h5>
                  <select class ="selectChosen" id="q2">
                    <option value="" disabled selected>Select an Option</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                  </select>
                </div>

                <div class="input-field col s12">
                  <p>Question 3</p>
                  <h5>You try to respond to your e-mails as soon as possible and cannot stand a messy inbox.</h5>
                  <select class ="selectChosen" id="q3">
                    <option value="" disabled selected>Select an Option</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                  </select>
                </div>

                <div class="input-field col s12">
                  <p>Question 4</p>
                  <h5>You find it easy to stay relaxed and focused even when there is some pressure.</h5>
                  <select class ="selectChosen" id="q4">
                    <option value="" disabled selected>Select an Option</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                  </select>
                </div>

                <div class="input-field col s12">
                  <p>Question 5</p>
                  <h5>Keeping your options open is more important than having a to-do list.</h5>
                  <select class ="selectChosen" id="q5">
                    <option value="" disabled selected>Select an Option</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                  </select>
                </div>

                 <div class="input-field col s12">
                    <p>Question 6</p>
                    <h5>You are usually highly motivated and energetic.</h5>
                    <select class ="selectChosen" id="q6">
                      <option value="" disabled selected>Select an Option</option>
                      <option value="1">1 (Strongly Disagree)</option>
                      <option value="2">2</option>
                      <option value="3">3</option>
                      <option value="4">4</option>
                      <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>

                <div class="input-field col s12">
                    <p>Question 7</p>
                    <h5>People can rarely upset you.</h5>
                    <select class ="selectChosen" id="q7">
                      <option value="" disabled selected>Select an Option</option>
                      <option value="1">1 (Strongly Disagree)</option>
                      <option value="2">2</option>
                      <option value="3">3</option>
                      <option value="4">4</option>
                      <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>

                <div class="input-field col s12">
                    <p>Question 8</p>
                    <h5>Your travel plans are usually well thought out.</h5>
                    <select class ="selectChosen" id="q8">
                      <option value="" disabled selected>Select an Option</option>
                      <option value="1">1 (Strongly Disagree)</option>
                      <option value="2">2</option>
                      <option value="3">3</option>
                      <option value="4">4</option>
                      <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>

                <div class="input-field col s12">
                    <p>Question 9</p>
                    <h5>You do not usually initiate conversations.</h5>
                    <select class ="selectChosen" id="q9">
                      <option value="" disabled selected>Select an Option</option>
                      <option value="1">1 (Strongly Disagree)</option>
                      <option value="2">2</option>
                      <option value="3">3</option>
                      <option value="4">4</option>
                      <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>

                <div class="input-field col s12">
                    <p>Question 10</p>
                    <h5>You rarely do something just out of sheer curiosity.</h5>
                    <select class ="selectChosen" id="q10">
                      <option value="" disabled selected>Select an Option</option>
                      <option value="1">1 (Strongly Disagree)</option>
                      <option value="2">2</option>
                      <option value="3">3</option>
                      <option value="4">4</option>
                      <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>   
                <a class="waves-effect waves-light btn" id="submitButton">SUBMIT</a>     
          </div>
        </div>
      </div>
</div>
<!-- Footer -->
      <footer class="page-footer">
            <div class="container">
              <div class="row">
                <div class="col l6 s12">
                   <a class="grey-text text-lighten-4"> Â© 2017 Copyright Neetu Toor</a>
                </div>
               </div>
            </div>
        </footer>

<!-- Modal popup Structure -->
  <div id="modal1" class="modal">
    <div class="modal-content">
      <h3>Best Match</h3>
      <hr>
      <h5 id="#surveyMatch"></h5>
       <p id="#imageHolder"></p>
    </div>
    <div class="modal-footer">
      <button class="modal-action modal-close waves-effect waves-green btn-flat">Close</a></button>
  </div>

<!-- materialize select menu -->        
  <script>
     $(document).ready(function() {
        $('select').material_select();
    });
  </script>

  <script type="text/javascript">

// <!--grab form elements-->

    $("#submitButton").on("click", function(){

      // validate the form
      function validateForm() {
      var isValid = true;
      $('.validate').each(function() {
        if ( $(this).val() === '' )
            isValid = false;
      });

      $('selectChosen').each(function() {

        if( $(this).val() === "")
          isValid = false
      })
      return isValid;
    }

    // If all required fields are filled
    if (validateForm() == true)
    {
      // Create an object for the user's survey data
        var newSurvey = {
            name: $("#name").val().trim(),
            photo: $("#photo").val().trim(),
            answers: [
              $("#q1").val(),
              $("#q2").val(),
              $("#q3").val(),
              $("#q2").val(),
              $("#q3").val(),
              $("#q4").val(),
              $("#q5").val(),
              $("#q6").val(),
              $("#q7").val(),
              $("#q8").val(),
              $("#q9").val(),
              $("#q10").val()
              ]
          };


        // Grab the URL
        var currentURL = window.location.origin;

        // AJAX post  
        $.post(currentURL + "/api/friends", newSurvey, function(data){

          // display best match for name and photo.
          $("#surveyMatch").text(data.name);
          $("#imageHolder").attr("src", data.photo);

          // Show the modal with the best match 
          $('.modal').modal("open");

        });
    }
    else
    {
      alert("Por favor, fill out all fields before submitting the survey!");
    }
      
      return false;
    });

  </script>

<!-- materialize select menu javascript -->  
  <script type="text/javascript">
    $(document).ready(function() {
      $(".modal").modal({
        dismissible: false, // Modal can be dismissed by clicking outside of the modal
        opacity: .5, // Opacity of modal background
        inDuration: 300, // Transition in duration
        outDuration: 200, // Transition out duration
        startingTop: '4%', // Starting top style attribute
        endingTop: '10%' // Ending top style attribute
      });
    });
  </script>


    </body>
  </html>